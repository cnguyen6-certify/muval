= muval

Meaningful Use Validator based on NIST's own.

== Introduction

NIST's Meaningful Use Validator is great to check if your CCDs are valid.
However it runs as as a Command Line Utility that outputs XML.
If you want to make validation part of your unit tests, you need it to be callable from code.
This project aims to do just that.
NIST made its code available http://cda-validation.nist.gov/cda-validation/downloads.html[here].
Also they consider their code to be public domain.
That makes it possible for this project to exist.
I am thankful for that.

== Are we there yet?

Yes

== Usage

This supports the legacy CLI usage as well as programmatic usage

=== CLI Usage

Build the jar
[source,bash]
----
./gradlew clean shadowJar
----

Then use it
[source,bash]
----
java -jar libs/muval-0.1-all.jar -input sampleCCD.xml -output result.xml
----

=== Programmatic usage

Import the dependency using maven, gradle, sbt, leingen or ivy. Example below is for gradle
[source,gradle]
----
dependencies {
    // ...
    compile 'com.github.rahulsom:muval:0.1'
}
----

Then use it in your code. This example is a Spock Specification. You could use it in test or production code.
[source,groovy]
----
import spock.lang.Specification
import gov.nist.mu.validation.*

class ValidatorSpec extends Specification {

    def "sample ccd should validate"() {
        when: "I validate a CCD"
        def result = Validator.validate(Rulesets.Cdar2c32,
                file('SampleCCDDocument.xml'),
                Rulesets.Ccd, Rulesets.Cda4Cdt, Rulesets.C32_v_2_5_c83_2_0
        )

        then: "There are 0 errors and 98 issues"
        result.validationResults*.issue.flatten().size() == 98
        result.validationResults*.issue.findAll { it.severity == 'errors' }.size() == 0
    }

}
----
